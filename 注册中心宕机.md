# 注册中心宕机

今天忽然想到一个问题，既然所有的微服务和网关在启动时都需要向注册中心进行服务注册，然后才能进行远程调用等功能，那要是注册中心挂掉了怎么办，岂不是所有远程调用都失效了？

后来我去搜了，发现有解决方案了的。注册中心宕机，远程调用还能成功吗？分为一下两种情况：

**1. 如果整个微服务项目刚开始启动，没有进行任何远程调用（网关和微服务都向注册中心进行了服务注册），这时候注册中心忽然宕机了，那么微服务之间进行远程调用则无法生效。**

**2. 如果在注册中心宕机前，微服务之间已经进行过远程调用了，这时候注册中心忽然宕机，那么微服务之间继续进行远程调用，会根据之前的缓存的实例信息，通过设置好的负载均衡算法，继续进行远程调用。**

- 具体情况如下：微服务项目启动后，网关和微服务向注册中心（Nacos等）进行服务注册，注册中心保存下这些服务信息并持续监控。这时有服务调用者向注册中心发送请求，注册中心会返回符合条件的服务提供者的数据，也就是实例信息，服务调用者会将这些数据临时保存到**实例缓存**中，同时注册中心和服务调用者之间会保持联系，为了将服务提供者的最新变更信息，推送给服务调用者。
- 这时候，注册中心忽然宕机了，那么服务调用者、服务提供者、注册中心失去联系。如果前端在这时发送请求到后端，那么相应的微服务，即服务调用者会根据之前保存在实例缓存中的实例信息，通过负载均衡算法，继续继续远程调用。服务也就能够继续进行了。